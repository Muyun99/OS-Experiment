## 2. 用户及文件权限管理
### 2.1 查看用户

1. 命令who am i 或者 who mom likes查看用户
2. 在 Linux 系统里， root 账户拥有整个系统至高无上的权利，比如 新建/添加 用户。


>root 权限，系统权限的一种，与 SYSTEM 权限可以理解成一个概念，但高于 Administrator 权限，root 是 Linux 和 UNIX 系统中的超级管理员用户帐户，该帐户拥有整个系统至高无上的权力，所有对象他都可以操作，所以很多黑客在入侵系统的时候，都要把权限提升到 root 权限，用 Windows 的方法理解也就是将自己的非法帐户添加到 Administrators 用户组。更比如安卓操作系统中（基于 Linux 内核）获得 root 权限之后就意味着已经获得了手机的最高权限，这时候你可以对手机中的任何文件（包括系统文件）执行所有增、删、改、查的操作。

### 2.2 创建用户
1. su <user> 可以切换到用户 user，执行时需要输入目标用户的密码
2. sudo <cmd> 可以以特权级别运行 cmd 命令，需要当前用户属于 sudo 组，且需要输入当前用户的密码
3. su - <user> 命令也是切换用户，同时环境变量也会跟着改变成目标用户的环境变量。
4. 新建一个用户
```
sudo adduser lilei 
su lilei

exit\\退出当前用户
```
### 2.3 用户组
>在 Linux 里面每个用户都有一个归属（用户组），用户组简单地理解就是一组用户的集合，它们共享一些资源和权限，同时拥有私有资源
1. 查看用户组: 使用groups命令

```
groups shiyanlou
```
2. 将其它用户加入 sudo 用户组
```
$ su -l lilei
$ sudo ls
```
>使用 usermod 命令可以为用户添加用户组，同样使用该命令你必需有 root 权限，你可以直接使用 root 用户为其它用户添加用户组，或者用其它已经在 sudo 用户组的用户使用 sudo 命令获取权限来执行该命令。
```
$ su shiyanlou # 
$ groups lilei
$ sudo usermod -G sudo lilei
$ groups lilei
```

### 2.4 删除用户 : 使用deluser命令
```
sudo deluser lilei
```

```
$ sudo deluser lilei --remove-home
```

两者的区别好像是后者会删除文件

## 3. Linux文件权限
>文件权限就是文件的访问控制权限，即哪些用户和组群可以访问文件以及可以执行什么样的操作。


>Unix/Linux系统是一个典型的多用户系统，不同的用户处于不同的地位，对文件和目录有不同的访问权限。为了保护系统的安全性，Unix/Linux系统除了对用户权限作了严格的界定外，还在用户身份认证、访问控制、传输安全、文件读写权限等方面作了周密的控制。

>在 Unix/Linux中的每一个文件或目录都包含有访问权限，这些访问权限决定了谁能访问和如何访问这些文件和目录。

### 3.1 查看文件权限

命令：ls -l
使用较长格式列出文件

* 文件类型

> 关于文件类型，这里有一点你必需时刻牢记 Linux 里面一切皆文件。正因为这一点才有了设备文件（ /dev 目录下有各种设备文件，大都跟具体的硬件设备相关）这一说。 socket：网络套接字，具体是什么，感兴趣的用户可以自己去了解或期待实验楼的后续相关课程。pipe 管道，这个东西很重要，我们以后将会讨论到，这里你先知道有它的存在即可。软链接文件：链接文件是分为两种的，另一种当然是“硬链接”（硬链接不常用，具体内容不作为本课程讨论重点，而软链接等同于 Windows 上的快捷方式,你记住这一点就够了）。

* 文件权限

> 读权限，表示你可以使用 cat <file name> 之类的命令来读取某个文件的内容；写权限，表示你可以编辑和修改某个文件； 执行权限，通常指可以运行的二进制程序文件或者脚本文件，如同 Windows 上的 exe 后缀的文件，不过 Linux 上不是通过文件后缀名来区分文件的类型。你需要注意的一点是，一个目录同时具有读权限和执行权限才可以打开并查看内部文件，而一个目录要有写权限才允许在其中创建其它文件，这是因为目录文件实际保存着该目录里面的文件的列表等信息。

> 所有者权限，这一点相信你应该明白了，至于所属用户组权限，是指你所在的用户组中的所有其它用户对于该文件的权限，比如，你有一个 iPad，那么这个用户组权限就决定了你的兄弟姐妹有没有权限使用它破坏它和占有它。

* 链接数
> 链接到该文件所在的 inode 结点的文件名数目

* 文件大小
> 以 inode 结点大小为单位来表示的文件大小，你可以给 ls 加上 -lh 参数来更直观的查看文件的大小。

* 命令ls -A：


    显示除了 .（当前目录）和 ..（上一级目录）之外的所有文件(包括隐藏文件)

* 命令ls -Al：


    查看某一个目录的完整属性

* 命令ls -dl <目录名>：


    显示所有文件大小，并以普通人类能看懂的方式呈现：

### 3.2 变更文件所有者
```
\\shiyanlou用户下
sudo adduser lilei
su lilei

cd /home/lilei
touch iphone6
exit

cd /home/lilei
ll

sudo chown shiyanlou iphone6
ll
```

### 3.3 修改文件权限

```
echo "echo \"hello shiyanlou\"" > iphone6
chmod 600 iphone6
cat iphone6

su lilei
cd /home/lilei

cat iphone6
```

## 4. Q & A
#### Q: adduser 和 useradd 的区别是什么？
#### A: useradd 只创建用户，创建完了用 passwd lilei 去设置新用户的密码。adduser 会创建用户，创建目录，创建密码（提示你设置），做这一系列的操作。其实 useradd、userdel 这类操作更像是一种命令，执行完了就返回。而 adduser 更像是一种程序，需要你输入、确定等一系列操作。